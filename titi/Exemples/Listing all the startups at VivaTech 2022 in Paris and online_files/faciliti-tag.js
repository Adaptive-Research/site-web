var FACIL_ITI={};!function(h){"use strict";h.POPIN_MANAGER={},function(o){const a="FACIL_ITI_POPIN",t="https://web-service.facil-iti.app";let r=!1,e,n;function i(){window.scrollTo(n,e)}let s=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){s=!0}}))}catch(e){}let l=!!s&&{passive:!1};function c(){return{app_url:t,features:"env_1",ui:{css:{height:o.context().height-60+"px",width:"420px",position:"fixed",borderRadius:"20px",top:"30px",border:"2px solid white"},position:function(){switch(h.configuration.popinPosition||(h.configuration.popinPosition="default"),h.configuration.popinPosition){case"left":case"right":return h.configuration.popinPosition;default:return"right"}}(),sideMargin:"30px",stylesheet:""}}}o.nodeMetaData=new WeakMap,o.disableScroll=()=>{e=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft,window.addEventListener("scroll",i,!1),window.addEventListener("DOMMouseScroll",i,!1),window.addEventListener("wheel",i,l),window.addEventListener("mousewheel",i,l),window.addEventListener("touchmove",i,l)},o.enableScroll=()=>{window.removeEventListener("scroll",i,!1),window.removeEventListener("DOMMouseScroll",i,!1),window.removeEventListener("wheel",i,l),window.removeEventListener("mousewheel",i,l),window.removeEventListener("touchmove",i,l)},o.popin=null,o.context=()=>({id:"popin-context",currentURL:window.location.href,width:window.innerWidth,height:window.innerHeight,lang:document.documentElement.lang,isDesktopView:600<window.innerWidth,isMobileView:window.innerWidth<=600,applicationIdentifier:void 0!==h.configuration?h.configuration.applicationIdentifier:null,uiVersion:void 0!==h.configuration?h.configuration.uiVersion:"default",iframeTitle:"FACIL-ITI solution de personnalisation de l'affichage"});const u={ui:{css:{height:"60vh",width:"100%",borderRadius:"20px 20px 0 0",bottom:"0px",position:"fixed",top:"auto",right:"0",left:"0",border:"none",borderTop:"2px solid white"},position:"left",sideMargin:"0"}},d={origin:{source:"tag",version:"cdn"}};o.isPopinOpen=()=>null!==document.querySelector("#"+a),o.toggle=(e=d)=>{o.isPopinOpen()?o.close():o.open(e)},o.getMaxZIndexInUse=()=>[...document.querySelectorAll("body *")].map(e=>parseInt(getComputedStyle(e).zIndex)).filter(e=>!isNaN(e)).reduce((e,t)=>Math.max(e,t),1)+15,o.applyLayout=function(){try{const i=document.querySelector("#"+a);if(i){var e,t,n=o.context().isDesktopView?c():Object.assign({},c(),u);for([e,t]of Object.entries(n.ui.css))i.style[e]=t;o.switchMode(r),"right"===n.ui.position?(i.style.right=n.ui.sideMargin,i.style.left="auto"):(i.style.left=n.ui.sideMargin,i.style.right="auto")}}catch(e){}},o.applyConfiguration=()=>{try{document.querySelector("#"+a).contentWindow.postMessage(o.context(),"*")}catch(e){}},o.open=function(e=d){let t;o.popin?t=o.popin:(t=document.createElement("iframe"),t.title=o.context().iframeTitle,t.src=c().app_url+"/ui/router/"+o.context().applicationIdentifier+"/popin/"+JSON.stringify(e),t.id=a,t.style.zIndex=o.getMaxZIndexInUse()+1,o.popin=t),t.onload=o.applyConfiguration,document.body.appendChild(t),o.applyLayout();var n=window.innerWidth;window.onresize=()=>{h.POPIN_MANAGER.applyLayout(),n!==window.innerWidth&&(n=window.innerWidth,h.POPIN_MANAGER.applyConfiguration())},document.querySelector("#"+a).addEventListener("mouseenter",o.disableScroll),document.querySelector("#"+a).addEventListener("mouseleave",o.enableScroll),window.addEventListener("touch",o.enableScroll),setTimeout(()=>{t.focus&&t.focus(),t.contentWindow&&t.contentWindow.focus&&t.contentWindow.focus()},300)},o.close=function(){o.enableScroll(),document.querySelector("#"+a).removeEventListener("mouseenter",o.disableScroll),document.querySelector("#"+a).removeEventListener("mouseleave",o.enableScroll),window.removeEventListener("touch",o.enableScroll),document.querySelector("#"+a).remove();let e=document.querySelector("[data-faciliti-popin]");e&&setTimeout(()=>{e.focus&&e.focus()},100)},o.switchPosition=function(){const e=document.querySelector("#"+a).style;e.right===c().ui.sideMargin?(e.right="auto",e.left=c().ui.sideMargin):(e.left="auto",e.right=c().ui.sideMargin)},o.resizeWindow=function(){const e=document.querySelector("#"+a).style;e.height===u.ui.css.height?e.height="100%":e.height=u.ui.css.height},o.switchMode=function(e){const t=document.querySelector("#"+a);t&&(t.style.borderColor=e?"#ffffff":"#121212")},o.clearAllDataInStorage=function(t=!1){if(window.localStorage.removeItem("FACIL_ITI"),window.sessionStorage.removeItem("FACIL-ITI_CSS"),window.sessionStorage.removeItem("FACIL-ITI_url_blacklist"),window.sessionStorage.removeItem("FACIL_ITI_CACHE"),window.dispatchEvent(new StorageEvent("storage",{key:"FACIL_ITI"})),!t){let e;var n=document.querySelector("#FACIL_ITI_POPIN"),t=document.querySelector("#FACIL_ITI_INCONTENT");n&&(e=n.contentWindow||n,e.postMessage({popinAction:"delete-all-user-data-from-storage"},"*")),t&&(e=t.contentWindow||t,e.postMessage({popinAction:"delete-all-user-data-from-storage"},"*"))}},o.setup=function(){(e=>{const t=document.querySelectorAll(e);t&&t.forEach(e=>{o.nodeMetaData.set(e,{toggleButtonActivated:!0}),e.addEventListener("click",e=>{e.preventDefault(),h.POPIN_MANAGER.toggle()},!1)})})('[data-faciliti-popin], a[href="https://ws.facil-iti.com"]'),g("#facil-iti"),f(),m()};let p=()=>{var e=window.location.href.replace(/#.*$/,"");window.history.replaceState("",document.title,e)},g=t=>{window.location.hash===t&&(h.POPIN_MANAGER.open(),p()),window.addEventListener("hashchange",function(e){window.location.hash===t&&(h.POPIN_MANAGER.toggle(),p())},!1)},f=()=>{document.addEventListener("keydown",function(e){e.ctrlKey&&e.shiftKey&&"KeyF"===e.code&&h.POPIN_MANAGER.toggle()},!1)},m=()=>{window.addEventListener("message",e=>{if([t,"https://cdn.facil-iti.app"].includes(e.origin))switch(e.data.popinAction){case"switch-position":o.switchPosition();break;case"resize":o.resizeWindow();break;case"close":o.close();break;case"switch-mode":r=e.data.isDarkMode,o.switchMode(r);break;case"delete-all-user-data-from-storage":o.clearAllDataInStorage(!0)}})}}(h.POPIN_MANAGER)}(FACIL_ITI),function(l){"use strict";l.INCONTENT_MANAGER={},function(o){const a="FACIL_ITI_INCONTENT",r="https://web-service.facil-iti.app",s={origin:{source:"tag",version:"cdn"}};o.inContent=null,o.context=()=>({id:"incontent-context",currentURL:window.location.href,width:window.innerWidth,height:window.innerHeight,lang:document.documentElement.lang,isDesktopView:!1,isMobileView:!1,applicationIdentifier:void 0!==l.configuration?l.configuration.applicationIdentifier:null,uiVersion:void 0!==l.configuration?l.configuration.uiVersion:"default",iframeTitle:"FACIL-ITI solution de personnalisation de l'affichage"});const i={app_url:r,features:"env_1",ui:{css:{height:"100%",width:"100%"},stylesheet:""}};o.applyLayout=function(){try{const n=document.querySelector("#"+a);for(var[e,t]of Object.entries(i.ui.css))n.style[e]=t}catch(e){}},o.applyConfiguration=()=>{try{document.querySelector("#"+a).contentWindow.postMessage(o.context(),"*")}catch(e){}},o.setup=function(e=o.context()){o.open("[data-faciliti-incontent]",e)},o.open=function(e,t){let n,i=document.querySelector(e);null!==i&&(n=document.createElement("iframe"),n.title=o.context().iframeTitle,n.src=r+"/ui/router/"+t.applicationIdentifier+"/in-content/"+JSON.stringify(s),n.id=a,o.inContent=n,n.onload=o.applyConfiguration,i.appendChild(n),o.applyLayout(),document.querySelector("#"+a).addEventListener("mouseenter",l.POPIN_MANAGER.disableScroll),document.querySelector("#"+a).addEventListener("mouseleave",l.POPIN_MANAGER.enableScroll))}}(l.INCONTENT_MANAGER)}(FACIL_ITI),function(h){"use strict";h.POC_PLAIN_LANGUAGE={},function(e){let t="initial",i={},o={},a="Passer en langage clair";const r=[{plain_language:"<h2>Notre politique</h2> <p>Nous avons mis en place une politique de confidentialité des données pour être conformes au Règlement Général sur la Protection des Données.</p><p>Nous vous informons à chaque fois de l’utilisation des données que vous renseignez.</p><p>Des données personnelles vous seront demandées à la page contact ou lors d’une candidature.</p><p>Votre adresse email vous sera demandée si vous souhaitez recevoir notre newsletter.</p><p>Pour toutes questions sur vos données personnelles, vous pouvez nous écrire à <a href='mailto:privacy@facil-iti.com.'>privacy@facil-iti.com.</a></p><p>[En plus du respect de la loi informatique et liberté du 6 janvier 1978, nous nous engageons à respecter le Règlement (UE) 2016/679 du Parlement européen et du Conseil du 27 avril 2016, dès son entrée en vigueur le 25 mai 2018].</p><h2>Qui collecte les données ?</h2> <p>Nous sommes responsables des traitements effectués sur vos données personnelles.</p><p>Notre siège social est à l’adresse suivante : FACIL’iti, ESTER Technopole, 16 rue Soyouz, 87068 Limoges.</p><h2>Quelles sont les finalités</h2> <p><strong>Quelles sont vos données personnelles à renseigner dans le formulaire de contact ?</strong></p><p>Pour nous contacter, vous devez renseigner : votre nom(s) et prénom(s), votre adresse e-mail, un objet du message et le message, et votre numéro de téléphone si vous le souhaitez.</p><p>Nous utiliserons vos données que pour revenir vers vous et répondre au mieux à vos besoins.</p><p><strong>Comment recevoir la newsletter ?</strong></p><p>Pour recevoir la newsletter, vous devez nous communiquer votre adresse e-mail.</p><p>Votre adresse e-mail sera utilisée uniquement pour vous envoyer la newsletter.</p><p>Sur chaque newsletter, il existe un lien que lequel vous pouvez cliquer pour ne plus recevoir la newsletter.</p>",target:{type:"selector",value:"#contenu .free-content",url:"/donnees-personnelles"}},{plain_language:"<p>Comment la solution FACIL'iti a-t-elle été créée ?</p><p>On vous explique tout dans cet article.</p>",target:{type:"content",value:"Vous êtes nombreux à nous demander comment est née FACIL’iti. Quelle a été l’idée de départ ? Comment les filtres FACIL’iti ont-ils été créés ? Quels sont les acteurs qui ont participé à la construction de notre outil de personnalisation web ?Remontons le temps pour découvrir les coulisses du lancement de notre outil d’inclusion numérique… […]",url:"/blog"}},{plain_language:"<p>Mardi 22 février, le Magazine de la Santé parle de FACIL'iti.</p><p>Un très beau reportage sur notre solution d'inclusion numérique</p><p>Cliquez ici pour Voir la vidéo.</p>",target:{type:"content",value:"Dans son émission du mardi 22 février, le Magazine de la Santé a consacré un très beau reportage à notre outil d’inclusion numérique. Une belle surprise pour toute l’équipe de FACIL’iti ! Voir la vidéo : Version texte : «&nbsp;(Marina) Rym, vous allez nous parler d’un outil très pratique pour les personnes qui ont des […]",url:"/blog"}}];function n(e,t){return i[e]=document.querySelector(t.target.value),i[e].parentNode}function s(e,t){return i[e]=l(t.target.value)[0],l(t.target.value)[0].parentElement}e.setup=function(){let n=!1;r.forEach(function(e,t){window.location.href.includes(e.target.url)&&(n=!0)}),n&&(p(),m(),window.addEventListener("keydown",function(e){e.ctrlKey&&e.shiftKey&&"KeyL"===e.code&&h.POC_PLAIN_LANGUAGE.togglePlainLanguage()}))},e.togglePlainLanguage=function(){"initial"===t?(t="plain",a="Revenir au texte initial",u()):(t="initial",a="Passer en langage clair",d()),g(),c()};let l=function(t){return[...document.querySelectorAll("body *")].filter(e=>{if(e.innerHTML===t)return e})},c=function(){try{document.querySelector("#FACIL_ITI_POPIN").contentWindow.postMessage(t,"*")}catch(e){}},u=function(){r.forEach(function(e,t){o[t]=document.createElement("div"),o[t].classList.add("facil-iti-plain-language","plain-language-text-"+t),o[t].innerHTML=e.plain_language,"selector"===e.target.type&&window.location.href.includes(e.target.url)&&n(t,e).replaceChild(o[t],i[t]),"content"===e.target.type&&window.location.href.includes(e.target.url)&&0<l(e.target.value).length&&s(t,e).replaceChild(o[t],i[t])})},d=function(){if(i&&o)for(var[t,n]of Object.entries(o)){let e=document.querySelector(".plain-language-text-"+t);e&&e.parentElement&&e.parentElement.replaceChild(i[t],n)}},p=function(){r.forEach(function(e,t){document.querySelector(".facil-iti-plain-language-toggle")||("selector"===e.target.type&&window.location.href.includes(e.target.url)&&n(t,e).insertBefore(f(),i[t]),"content"===e.target.type&&window.location.href.includes(e.target.url)&&0<l(e.target.value).length&&s(t,e).insertBefore(f(),i[t]))})};function g(){document.querySelectorAll("button.plain-language-toggle-button").forEach(e=>{e.children[1].innerHTML=a,e.setAttribute("aria-label",a),e.setAttribute("aria-selected",!0)})}let f=function(){let e=document.createElement("button");e.classList.add("plain-language-toggle-button"),e.setAttribute("aria-label",a),e.setAttribute("aria-selected",!1),e.onclick=function(e){h.POC_PLAIN_LANGUAGE.togglePlainLanguage(),g(),e.stopPropagation()},document.head.appendChild(document.createElement("style")).innerHTML="button.plain-language-toggle-button {display: flex;align-items: center;justify-content: center;flex-direction: row;color: #ffffff;font-size: 1em;background: #a8002d;padding: 5px 10px;border: 2px solid #a8002d;border-radius: 5px;transition: all ease 300ms;margin:15px 0;}button.plain-language-toggle-button svg{width : 20px;height: 20px; fill:#ffffff;margin-right:10px;transition: all ease 300ms;}button.plain-language-toggle-button p{width: auto;margin: 0;padding: 0; color: #ffffff !important;transition: all ease 300ms;}button.plain-language-toggle-button:hover {color: #a8002d;background: #ffffff;border: 2px solid #a8002d;}button.plain-language-toggle-button:hover svg{fill:#a8002d;}button.plain-language-toggle-button:hover p{color: #a8002d !important}}";let t=document.createElement("svg");t.innerHTML='<svg version="1.1" aria-hidden="true" focusable="false" role="image" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 6.2 8" style="enable-background:new 0 0 6.2 8;" xml:space="preserve"><g><path className="st0" d="M4.5,0.2v1.4c0,0.1,0.1,0.1,0.1,0.1H6L4.5,0.2z"/><path className="st0" d="M3.9,1.9V0H0.2C0.1,0,0,0.1,0,0.2v7.6C0,7.9,0.1,8,0.2,8H6c0.1,0,0.2-0.1,0.2-0.2V2.3H4.4C4.1,2.3,3.9,2.1,3.9,1.9z M1.3,1.2h1.2c0.2,0,0.3,0.1,0.3,0.3S2.7,1.9,2.5,1.9H1.3c-0.2,0-0.3-0.1-0.3-0.3S1.1,1.2,1.3,1.2z M5,6.8H1.3c-0.2,0-0.3-0.1-0.3-0.3s0.1-0.3,0.3-0.3H5c0.2,0,0.3,0.1,0.3,0.3S5.1,6.8,5,6.8z M5,5.1H1.3C1.1,5.1,0.9,5,0.9,4.8s0.1-0.3,0.3-0.3H5c0.2,0,0.3,0.1,0.3,0.3S5.1,5.1,5,5.1z M5.3,3.2c0,0.2-0.1,0.3-0.3,0.3H1.3c-0.2,0-0.3-0.1-0.3-0.3s0.1-0.3,0.3-0.3H5C5.1,2.9,5.3,3,5.3,3.2z"/></g></svg>',e.appendChild(t);let n=document.createElement("p");return n.innerHTML=a,e.appendChild(n),e},m=function(){window.addEventListener("message",e=>{["https://web-service.facil-iti.app","https://www.facil-iti.app","https://cdn.facil-iti.app"].includes(e.origin)&&("toggle-plain-language"===e.data.popinAction?h.POC_PLAIN_LANGUAGE.togglePlainLanguage():"get-toggle-plain-language"===e.data.popinAction&&c())})}}(h.POC_PLAIN_LANGUAGE)}(FACIL_ITI),function(o){"use strict";const a={applicationIdentifier:null,webServiceUrl:"https://ws.facil-iti.com",domains:[],uiVersion:"default"};let n=null,i="blue",r="green",t=null;function s(){return c()&&c().active_profile&&""!==c().active_profile}function l(){return null!==u().config}function c(){return null!==window.localStorage.getItem("FACIL_ITI")&&JSON.parse(window.localStorage.getItem("FACIL_ITI"))}function u(){return c().profiles[c().active_profile]}function d(){for(var e in o.reset)if(o.reset.hasOwnProperty(e)&&"extend"!==e&&-1<o.executedFunctions.indexOf(e))try{o.reset[e]()}catch(e){}}function p(e){var t;e&&!e.url_blacklist.some(e=>RegExp(e,"gi").test(location.pathname))&&(d(),function(t){if(t&&0!==t.length){t=t.reduce((e,t)=>e+t.content,"").replace(/#FACIL_ITI_DOMAIN#/g,a.webServiceUrl);let e=document.querySelector("style[data-faciliti-style]");null!==e?e.innerHTML=t:(e=document.createElement("style"),e.dataset.facilitiStyle="",e.innerHTML=t,document.head.appendChild(e))}}(e.css),(t=e.stylesheets)&&0!==t.length&&(document.querySelectorAll("link[data-faciliti-stylesheet='"+r+"']").forEach(e=>e.remove()),t.map(e=>a.webServiceIntegrationUrl+e).forEach(e=>{const t=document.createElement("link");t.dataset.facilitiStylesheet=i,t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.head.appendChild(t)}),[i,r]=[r,i]),function(t){if(t.js&&t.js.length){let e=document.querySelector("script[data-faciliti-script]");e&&e.remove(),e=document.createElement("script"),e.dataset.facilitiScript="features",e.setAttribute("src",a.webServiceUrl+"/"+t.engine),e.setAttribute("crossorigin","anonymous"),t.engine_integrity&&e.setAttribute("integrity",t.engine_integrity),document.head.appendChild(e)}}(e),e=e.features,document.documentElement.dataset.faciliti=e.join(" "))}function g(){window.postMessage("faciliti:initialization")}function f(){!function(e){try{c()&&s()&&l()&&(e.language=u().language);const n=document.querySelector("script[data-application-identifier]");var t;n.dataset.applicationIdentifier&&(n.dataset.applicationIdentifier=n.dataset.applicationIdentifier.trim(),t=new RegExp(/^[A-Za-z0-9]{8}-(?:[A-Za-z0-9]{4}-){3}[A-Za-z0-9]{12}$/g),n.dataset.applicationIdentifier.match(t)||console.log("FACIL-ITI INFO: wrong format for applicationIdentifier")),Object.assign(e,{...n.dataset})}catch(e){}}(a),function(){try{o.INCONTENT_MANAGER.setup(a)}catch(e){}try{o.POPIN_MANAGER.setup()}catch(e){}try{o.configuration.uiVersion&&"staging"===o.configuration.uiVersion&&"9c57a7db-d64b-11e5-8f05-000c298ed446"===a.applicationIdentifier&&o.POC_PLAIN_LANGUAGE.setup()}catch(e){}}(),s()&&l()&&sessionStorage.getItem("FACIL_ITI_CACHE")&&(n=JSON.parse(sessionStorage.getItem("FACIL_ITI_CACHE")),p(n)),function(){const i=new MutationObserver(function(e){let t=[],n=!1;e.forEach(function(e){0<e.addedNodes.length&&Array.from(e.addedNodes).forEach(e=>{void 0!==e.dataset&&void 0!==e.dataset.facilitiPopin?t.push(e):e.hasChildNodes()&&(t=t.concat(...e.querySelectorAll("*[data-faciliti-popin]")))})}),0<t.length&&(t.forEach(e=>{o.POPIN_MANAGER.nodeMetaData.has(e)&&o.POPIN_MANAGER.nodeMetaData.get(e).toggleButtonActivated||(o.POPIN_MANAGER.nodeMetaData.set(e,{toggleButtonActivated:!0}),e.addEventListener("click",e=>{o.POPIN_MANAGER.toggle(),e.preventDefault()},!1),n=!0)}),n&&i.disconnect())});i.observe(document.body,{subtree:!0,childList:!0})}()}async function m(){var e,t;(e=g,t=!1,function(){t||(t=!0,e())})(),s()&&l()?(n=await async function(e,t){let n=new URL(a.webServiceUrl+"/tag/engine/");n.searchParams.append("params",t),n.searchParams.append("id",e);const i=await fetch(n,{});return i.json()}(a.applicationIdentifier,u().config),JSON.stringify(n)!==sessionStorage.getItem("FACIL_ITI_CACHE")&&(p(n),sessionStorage.setItem("FACIL_ITI_CACHE",JSON.stringify(n)))):(d(),function(){let e=document.querySelector("script[data-faciliti-script]");e&&e.remove();let t=document.querySelector("style[data-faciliti-style]");t&&t.remove();delete document.documentElement.dataset.faciliti}(),sessionStorage.removeItem("FACIL_ITI_CACHE"))}function h(e){let t=null;var n=document.querySelector("#FACIL_ITI_POPIN"),i=document.querySelector("#FACIL_ITI_INCONTENT");if(n&&(t=n.contentWindow||n),i&&(t=i.contentWindow||i),t){i=localStorage.getItem("FACIL_ITI")||{};try{t.postMessage(i,e)}catch(e){}}}function w(e){window.localStorage.setItem("FACIL_ITI",e),window.dispatchEvent(new StorageEvent("storage",{key:"FACIL_ITI"})),h("*")}function e(e,t){this[e]=this[e]||t}try{switch(window.addEventListener("message",function(e){try{if(!["https://www.facil-iti.app","https://cdn.facil-iti.app"].includes(e.origin))return!1;var t="string"==typeof e.data?JSON.parse(e.data):e.data;switch(t.subject){case"save-filters":w(t.content);break;case"load-filters":h(e.origin)}}catch(e){}}),window.addEventListener("storage",function(e){"FACIL_ITI"===e.key&&(clearTimeout(t),t=setTimeout(m,300))}),document.addEventListener("pageChanged",()=>{o.initialize(),o.execute()}),document.addEventListener("readystatechange",e=>{switch(document.readyState){case"interactive":f();break;case"complete":m()}}),document.readyState){case"interactive":f();break;case"complete":f(),m()}Object.assign(o,{conf:()=>!0,configuration:a,getAdaptationData:function(){return n},saveFilters:w,version:"2.0.1",executedFunctions:[],page:document,reset:{extend:e},utilities:{extend:e},modules:{extend:e},initialize:f,execute:m,apply:function(){f(),m()}})}catch(e){}}(FACIL_ITI);
